# 权限禁用UI行为测试指南

## 测试目标
验证权限禁用后的前端UI表现是否符合预期：
1. 禁用的权限节点显示为灰色
2. 禁用的权限节点无法展开
3. 禁用的权限节点显示锁定图标
4. 用户尝试展开禁用节点时显示提示消息

## 测试步骤

### 1. 启动应用
```bash
# 后端
mvn spring-boot:run

# 前端（新终端）
cd frontend
npm run dev
```

### 2. 登录系统
- 用户名：admin
- 密码：admin123

### 3. 进入权限管理页面
- 导航到：系统管理 -> 权限管理
- 确保使用"树形视图"模式

### 4. 测试一级权限禁用

#### 4.1 选择测试目标
- 选择一个非核心的一级权限（如：电商管理、商品管理等）
- 确保该权限当前是启用状态

#### 4.2 禁用权限
- 点击该权限行的状态开关，将其设置为"禁用"
- 观察页面变化

#### 4.3 验证UI表现
- [ ] 权限行背景变为浅灰色（#f5f7fa）
- [ ] 权限名称显示删除线且颜色变为灰色（#c0c4cc）
- [ ] 权限名称后显示红色锁定图标
- [ ] 整行透明度降低（opacity: 0.7）
- [ ] 展开图标颜色变为灰色且鼠标悬停显示"不可点击"

#### 4.4 测试展开行为
- 尝试点击展开图标或权限名称展开该节点
- [ ] 系统显示警告消息："权限'XXX'已禁用，无法展开查看子权限"
- [ ] 节点保持折叠状态，无法展开

### 5. 测试二级权限禁用

#### 5.1 启用一级权限
- 先启用上一步测试的一级权限
- 展开该一级权限查看其子权限

#### 5.2 禁用二级权限
- 选择一个二级权限（如：用户管理、角色管理等）
- 将其状态设置为"禁用"

#### 5.3 验证UI表现
- [ ] 二级权限行显示与一级权限相同的禁用样式
- [ ] 该二级权限无法展开查看三级权限
- [ ] 其他同级的二级权限不受影响

### 6. 测试级联效果

#### 6.1 测试一级权限禁用的级联
- 启用一个一级权限及其所有子权限
- 禁用该一级权限
- [ ] 验证所有子权限（二级、三级）都被自动禁用
- [ ] 所有子权限都显示禁用样式

#### 6.2 测试权限启用的级联
- 选择一个被禁用的三级权限
- 启用该三级权限
- [ ] 验证其父权限（二级、一级）都被自动启用
- [ ] 所有被启用的权限恢复正常样式

### 7. 测试核心权限保护

#### 7.1 尝试禁用核心权限
- 找到核心权限（如：系统管理、个人中心等）
- 尝试禁用这些权限
- [ ] 系统显示错误消息："核心权限（系统管理、个人中心等）不能禁用"
- [ ] 核心权限保持启用状态

### 8. 测试搜索和过滤

#### 8.1 切换到列表视图
- 点击"列表视图"按钮
- 在搜索条件中选择"状态" -> "禁用"
- [ ] 只显示被禁用的权限
- [ ] 禁用的权限在列表中也显示相应的样式

## 预期结果

### UI样式效果
1. **禁用权限行**：
   - 背景色：#f5f7fa
   - 透明度：0.7
   - 悬停背景色：#e9ecef

2. **禁用权限文本**：
   - 颜色：#c0c4cc
   - 文本装饰：删除线

3. **禁用权限图标**：
   - 展开图标：灰色，不可点击
   - 锁定图标：红色（#f56c6c）

4. **禁用权限标签**：
   - 透明度：0.6

### 交互行为
1. **展开限制**：
   - 禁用的权限节点无法展开
   - 尝试展开时显示警告消息
   - 强制保持折叠状态

2. **级联效果**：
   - 禁用一级权限 → 所有子权限被禁用
   - 启用三级权限 → 父权限被启用

3. **核心权限保护**：
   - 核心权限无法被禁用
   - 显示相应的错误提示

## 测试完成标准

所有上述检查项都通过，且：
1. UI表现符合设计要求
2. 用户体验流畅，无异常错误
3. 权限级联逻辑正确
4. 核心权限得到保护

## 注意事项

1. 测试过程中注意观察浏览器控制台，确保无JavaScript错误
2. 测试不同浏览器的兼容性
3. 测试响应式布局在不同屏幕尺寸下的表现
4. 确保所有提示消息都是中文且表述清晰 